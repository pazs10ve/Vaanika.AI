{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sharm\\\\kalasetu-submission\\\\frontend\\\\src\\\\pages\\\\ChatPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Sidebar from '../components/Sidebar';\nimport PromptInput from '../components/PromptInput';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatPage = () => {\n  _s();\n  const [sessions, setSessions] = useState([]);\n  const [activeSession, setActiveSession] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [userId, setUserId] = useState(null);\n  const [userName, setUserName] = useState(null);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [showWelcome, setShowWelcome] = useState(false);\n  const [showUserMenu, setShowUserMenu] = useState(false);\n  const [isNewChat, setIsNewChat] = useState(false);\n  const chatEndRef = useRef(null);\n  useEffect(() => {\n    // Load user info from localStorage\n    const storedUserId = localStorage.getItem('userId');\n    const storedUserName = localStorage.getItem('loggedInUser');\n    if (storedUserId) setUserId(storedUserId);\n    if (storedUserName) setUserName(storedUserName);\n  }, []);\n  useEffect(() => {\n    // Fetch sessions only after userId is loaded\n    const fetchSessions = async () => {\n      if (!userId) return;\n      try {\n        const token = localStorage.getItem('token');\n        const res = await fetch(`http://localhost:4000/api/sessions`, {\n          headers: {\n            'Authorization': token\n          }\n        });\n        const data = await res.json();\n        setSessions(data);\n      } catch (err) {\n        console.error('Error fetching sessions:', err);\n      }\n    };\n    fetchSessions();\n  }, [userId]);\n  useEffect(() => {\n    const fetchHistory = async () => {\n      if (!activeSession) {\n        setHistory([]);\n        return;\n      }\n      const token = localStorage.getItem('token');\n      const res = await fetch(`http://localhost:4000/api/sessions/${activeSession}/messages`, {\n        headers: {\n          'Authorization': token\n        }\n      });\n      if (res.ok) {\n        const messages = await res.json();\n        setHistory(messages);\n      } else {\n        setHistory([]);\n      }\n    };\n    fetchHistory();\n  }, [activeSession]);\n\n  // Scroll to bottom on new message\n  useEffect(() => {\n    if (chatEndRef.current) {\n      chatEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [history]);\n\n  // Show welcome message when a new session is created or new chat is clicked\n  useEffect(() => {\n    if (isNewChat) {\n      setShowWelcome(true);\n    } else {\n      setShowWelcome(false);\n    }\n  }, [isNewChat]);\n  const handleNewChat = () => {\n    setActiveSession(null);\n    setHistory([]);\n    setIsNewChat(true);\n    setShowWelcome(true);\n  };\n  const handleSessionSelect = sessionId => {\n    setActiveSession(sessionId);\n    setIsNewChat(false);\n    setShowWelcome(false);\n  };\n  const handlePromptSubmit = async (prompt, type) => {\n    if (!userId) {\n      alert('Please login first.');\n      return;\n    }\n\n    // If this is a new chat, create a session first\n    let sessionId = activeSession;\n    if (isNewChat || !activeSession) {\n      try {\n        const token = localStorage.getItem('token');\n        // Create session with first message as title\n        const sessionTitle = prompt.length > 50 ? prompt.substring(0, 50) + '...' : prompt;\n        const sessionRes = await fetch('http://localhost:4000/api/sessions', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': token\n          },\n          body: JSON.stringify({\n            title: sessionTitle,\n            userName\n          })\n        });\n        if (sessionRes.ok) {\n          const newSession = await sessionRes.json();\n          sessionId = newSession._id;\n          setActiveSession(sessionId);\n          setSessions(prev => [newSession, ...prev]);\n          setIsNewChat(false);\n        } else {\n          alert('Failed to create session');\n          return;\n        }\n      } catch (err) {\n        console.error('Failed to create session:', err);\n        alert('Failed to create session');\n        return;\n      }\n    }\n    const endpoint = `http://localhost:4000/api/generate/${type}`;\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': token\n        },\n        body: JSON.stringify({\n          prompt,\n          sessionId\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error('API Error:', response.status, errorText);\n        alert(`Error: ${response.status}`);\n        return;\n      }\n      // After generation, refresh history\n      const res = await fetch(`http://localhost:4000/api/sessions/${sessionId}/messages`, {\n        headers: {\n          'Authorization': token\n        }\n      });\n      if (res.ok) {\n        const messages = await res.json();\n        setHistory(messages);\n      }\n    } catch (err) {\n      console.error('Fetch error:', err);\n      alert('Network or server error');\n    }\n  };\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('loggedInUser');\n    localStorage.removeItem('userId');\n    window.location.href = '/login';\n  };\n\n  // User avatar with first letter\n  const userInitial = userName ? userName.charAt(0).toUpperCase() : 'U';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex bg-black text-white relative\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      userId: userId,\n      userName: userName,\n      sessions: sessions,\n      setSessions: setSessions,\n      setActiveSession: handleSessionSelect,\n      setHistory: setHistory,\n      activeSession: activeSession,\n      collapsed: sidebarCollapsed,\n      onToggleCollapse: () => setSidebarCollapsed(!sidebarCollapsed),\n      onNewChat: handleNewChat\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex-1 flex flex-col h-screen transition-all duration-300 ${sidebarCollapsed ? 'ml-16' : 'ml-64'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto px-4 py-6 space-y-4\",\n        style: {\n          marginBottom: '100px'\n        },\n        children: [history.map((entry, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${entry.role === 'user' ? 'justify-end' : 'justify-start'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-xl px-4 py-3 rounded-lg shadow ${entry.role === 'user' ? 'bg-green-600 text-white' : 'bg-zinc-800 text-zinc-100'} whitespace-pre-line`,\n            children: [entry.role === 'user' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"block text-xs opacity-70 mb-1\",\n              children: \"You\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 19\n            }, this), entry.role === 'assistant' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"block text-xs opacity-70 mb-1\",\n              children: [\"AI (\", entry.type || 'text', \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 19\n            }, this), entry.type === 'video' && entry.role === 'assistant' ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              src: entry.url || entry.content,\n              className: \"w-full rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 19\n            }, this) : entry.type === 'graphics' && entry.role === 'assistant' ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: entry.url || entry.content,\n              alt: \"Generated Graphic\",\n              className: \"w-full rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this) : entry.type === 'audio' && entry.role === 'assistant' ? /*#__PURE__*/_jsxDEV(\"audio\", {\n              controls: true,\n              src: entry.url || entry.content,\n              className: \"w-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: entry.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: chatEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), showWelcome && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `absolute inset-0 flex items-center justify-center z-10 pointer-events-none transition-all duration-300 ${sidebarCollapsed ? 'left-16' : 'left-64'} right-0`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-6xl font-bold text-white mb-4\",\n            children: [\"Welcome, \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-green-400\",\n              children: userName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 26\n            }, this), \"!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xl text-zinc-400 max-w-md mx-auto\",\n            children: \"Start a new conversation by typing your first message below.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `absolute bottom-0 z-10 transition-all duration-300 pb-6 ${sidebarCollapsed ? 'left-20' : 'left-72'} right-6`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-zinc-900 border-t border-zinc-800 rounded-2xl shadow-lg p-4 max-w-4xl mx-auto\",\n          children: /*#__PURE__*/_jsxDEV(PromptInput, {\n            onSubmit: handlePromptSubmit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatPage, \"InLKkACqDxMKU0HRTcko7QnU8GA=\");\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Sidebar","PromptInput","jsxDEV","_jsxDEV","ChatPage","_s","sessions","setSessions","activeSession","setActiveSession","history","setHistory","userId","setUserId","userName","setUserName","sidebarCollapsed","setSidebarCollapsed","showWelcome","setShowWelcome","showUserMenu","setShowUserMenu","isNewChat","setIsNewChat","chatEndRef","storedUserId","localStorage","getItem","storedUserName","fetchSessions","token","res","fetch","headers","data","json","err","console","error","fetchHistory","ok","messages","current","scrollIntoView","behavior","handleNewChat","handleSessionSelect","sessionId","handlePromptSubmit","prompt","type","alert","sessionTitle","length","substring","sessionRes","method","body","JSON","stringify","title","newSession","_id","prev","endpoint","response","errorText","text","status","handleLogout","removeItem","window","location","href","userInitial","charAt","toUpperCase","className","children","collapsed","onToggleCollapse","onNewChat","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","map","entry","idx","role","controls","src","url","content","alt","ref","onSubmit","_c","$RefreshReg$"],"sources":["C:/Users/sharm/kalasetu-submission/frontend/src/pages/ChatPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport Sidebar from '../components/Sidebar';\r\nimport PromptInput from '../components/PromptInput';\r\n\r\nconst ChatPage = () => {\r\n  const [sessions, setSessions] = useState([]);\r\n  const [activeSession, setActiveSession] = useState(null);\r\n  const [history, setHistory] = useState([]);\r\n  const [userId, setUserId] = useState(null);\r\n  const [userName, setUserName] = useState(null);\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [showWelcome, setShowWelcome] = useState(false);\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [isNewChat, setIsNewChat] = useState(false);\r\n  const chatEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    // Load user info from localStorage\r\n    const storedUserId = localStorage.getItem('userId');\r\n    const storedUserName = localStorage.getItem('loggedInUser');\r\n    if (storedUserId) setUserId(storedUserId);\r\n    if (storedUserName) setUserName(storedUserName);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Fetch sessions only after userId is loaded\r\n    const fetchSessions = async () => {\r\n      if (!userId) return;\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await fetch(`http://localhost:4000/api/sessions`, {\r\n          headers: { 'Authorization': token }\r\n        });\r\n        const data = await res.json();\r\n        setSessions(data);\r\n      } catch (err) {\r\n        console.error('Error fetching sessions:', err);\r\n      }\r\n    };\r\n    fetchSessions();\r\n  }, [userId]);\r\n\r\n  useEffect(() => {\r\n    const fetchHistory = async () => {\r\n      if (!activeSession) {\r\n        setHistory([]);\r\n        return;\r\n      }\r\n      const token = localStorage.getItem('token');\r\n      const res = await fetch(`http://localhost:4000/api/sessions/${activeSession}/messages`, {\r\n        headers: { 'Authorization': token }\r\n      });\r\n      if (res.ok) {\r\n        const messages = await res.json();\r\n        setHistory(messages);\r\n      } else {\r\n        setHistory([]);\r\n      }\r\n    };\r\n    fetchHistory();\r\n  }, [activeSession]);\r\n\r\n  // Scroll to bottom on new message\r\n  useEffect(() => {\r\n    if (chatEndRef.current) {\r\n      chatEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }, [history]);\r\n\r\n  // Show welcome message when a new session is created or new chat is clicked\r\n  useEffect(() => {\r\n    if (isNewChat) {\r\n      setShowWelcome(true);\r\n    } else {\r\n      setShowWelcome(false);\r\n    }\r\n  }, [isNewChat]);\r\n\r\n  const handleNewChat = () => {\r\n    setActiveSession(null);\r\n    setHistory([]);\r\n    setIsNewChat(true);\r\n    setShowWelcome(true);\r\n  };\r\n\r\n  const handleSessionSelect = (sessionId) => {\r\n    setActiveSession(sessionId);\r\n    setIsNewChat(false);\r\n    setShowWelcome(false);\r\n  };\r\n\r\n  const handlePromptSubmit = async (prompt, type) => {\r\n    if (!userId) {\r\n      alert('Please login first.');\r\n      return;\r\n    }\r\n\r\n    // If this is a new chat, create a session first\r\n    let sessionId = activeSession;\r\n    if (isNewChat || !activeSession) {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        // Create session with first message as title\r\n        const sessionTitle = prompt.length > 50 ? prompt.substring(0, 50) + '...' : prompt;\r\n        const sessionRes = await fetch('http://localhost:4000/api/sessions', {\r\n          method: 'POST',\r\n          headers: { \r\n            'Content-Type': 'application/json',\r\n            'Authorization': token\r\n          },\r\n          body: JSON.stringify({ title: sessionTitle, userName }),\r\n        });\r\n        \r\n        if (sessionRes.ok) {\r\n          const newSession = await sessionRes.json();\r\n          sessionId = newSession._id;\r\n          setActiveSession(sessionId);\r\n          setSessions(prev => [newSession, ...prev]);\r\n          setIsNewChat(false);\r\n        } else {\r\n          alert('Failed to create session');\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to create session:', err);\r\n        alert('Failed to create session');\r\n        return;\r\n      }\r\n    }\r\n\r\n    const endpoint = `http://localhost:4000/api/generate/${type}`;\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': token\r\n        },\r\n        body: JSON.stringify({ prompt, sessionId }),\r\n      });\r\n      if (!response.ok) {\r\n        const errorText = await response.text();\r\n        console.error('API Error:', response.status, errorText);\r\n        alert(`Error: ${response.status}`);\r\n        return;\r\n      }\r\n      // After generation, refresh history\r\n      const res = await fetch(`http://localhost:4000/api/sessions/${sessionId}/messages`, {\r\n        headers: { 'Authorization': token }\r\n      });\r\n      if (res.ok) {\r\n        const messages = await res.json();\r\n        setHistory(messages);\r\n      }\r\n    } catch (err) {\r\n      console.error('Fetch error:', err);\r\n      alert('Network or server error');\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('loggedInUser');\r\n    localStorage.removeItem('userId');\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  // User avatar with first letter\r\n  const userInitial = userName ? userName.charAt(0).toUpperCase() : 'U';\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex bg-black text-white relative\">\r\n      {/* Sidebar */}\r\n      <Sidebar\r\n        userId={userId}\r\n        userName={userName}\r\n        sessions={sessions}\r\n        setSessions={setSessions}\r\n        setActiveSession={handleSessionSelect}\r\n        setHistory={setHistory}\r\n        activeSession={activeSession}\r\n        collapsed={sidebarCollapsed}\r\n        onToggleCollapse={() => setSidebarCollapsed(!sidebarCollapsed)}\r\n        onNewChat={handleNewChat}\r\n      />\r\n      \r\n      {/* Main Chat Area */}\r\n      <div className={`flex-1 flex flex-col h-screen transition-all duration-300 ${sidebarCollapsed ? 'ml-16' : 'ml-64'}`}>\r\n        {/* Chat Stream */}\r\n        <div className=\"flex-1 overflow-y-auto px-4 py-6 space-y-4\" style={{marginBottom: '100px'}}>\r\n          {history.map((entry, idx) => (\r\n            <div key={idx} className={`flex ${entry.role === 'user' ? 'justify-end' : 'justify-start'}`}>\r\n              <div className={`max-w-xl px-4 py-3 rounded-lg shadow ${entry.role === 'user' ? 'bg-green-600 text-white' : 'bg-zinc-800 text-zinc-100'} whitespace-pre-line`}>\r\n                {entry.role === 'user' && (\r\n                  <span className=\"block text-xs opacity-70 mb-1\">You</span>\r\n                )}\r\n                {entry.role === 'assistant' && (\r\n                  <span className=\"block text-xs opacity-70 mb-1\">AI ({entry.type || 'text'})</span>\r\n                )}\r\n                {/* Render text or output */}\r\n                {entry.type === 'video' && entry.role === 'assistant' ? (\r\n                  <video controls src={entry.url || entry.content} className=\"w-full rounded\" />\r\n                ) : entry.type === 'graphics' && entry.role === 'assistant' ? (\r\n                  <img src={entry.url || entry.content} alt=\"Generated Graphic\" className=\"w-full rounded\" />\r\n                ) : entry.type === 'audio' && entry.role === 'assistant' ? (\r\n                  <audio controls src={entry.url || entry.content} className=\"w-full\" />\r\n                ) : (\r\n                  <span>{entry.content}</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div ref={chatEndRef} />\r\n        </div>\r\n        \r\n        {/* Welcome Message - Big and Bold in Center */}\r\n        {showWelcome && (\r\n          <div className={`absolute inset-0 flex items-center justify-center z-10 pointer-events-none transition-all duration-300 ${sidebarCollapsed ? 'left-16' : 'left-64'} right-0`}>\r\n            <div className=\"text-center\">\r\n              <h1 className=\"text-6xl font-bold text-white mb-4\">\r\n                Welcome, <span className=\"text-green-400\">{userName}</span>!\r\n              </h1>\r\n              <p className=\"text-xl text-zinc-400 max-w-md mx-auto\">\r\n                Start a new conversation by typing your first message below.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Prompt Input at Bottom */}\r\n        <div className={`absolute bottom-0 z-10 transition-all duration-300 pb-6 ${sidebarCollapsed ? 'left-20' : 'left-72'} right-6`}> \r\n          <div className=\"bg-zinc-900 border-t border-zinc-800 rounded-2xl shadow-lg p-4 max-w-4xl mx-auto\">\r\n            <PromptInput onSubmit={handlePromptSubmit} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}